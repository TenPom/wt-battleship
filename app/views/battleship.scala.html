@(controller: de.htwg.battleship.controller.IMasterController, email: String)

@import _root_.de.htwg.battleship.util.State;

@main("Battleship", email) {

@****************************************** SCRIPTS ***********************************************@

    <script src="@routes.Assets.versioned("/javascripts/webSocket.js")"></script>

    <script language="JavaScript"> 
    
        function setCords(col, row) {
            
            row = String.fromCharCode("a".charCodeAt(0) + row);

            
    	    document.getElementById("horizontal").onclick = function() {
    	        $.post("/json/" + row + " " + col + " horizontal");
    	    }
    	    
    	    document.getElementById("vertical").onclick = function() {
    	        $.post("/json/" + row + " " + col + " vertical");
                 
    	    }
       	}
       	
       	function shoot(col, row) {
       	    row = String.fromCharCode("a".charCodeAt(0) + row);
       	    
            $.post("/json/" + row + " " + col, function (data) {
                    var msg = JSON.parse(data);
    	    });
       	}
      
    </script>
   
@********************************************* INFO ****************************************************@
   
    <div class="row">
        <div class="col-md-4 text-center"></div>
        <div class="col-md-4">
            <div class="alert alert-info alert-dismissable text-center">
                @{controller.getCurrentState() match {
                    case State.PLACE1 =>
                        controller.getPlayer1().getName() + " now place the ship with the length of " + (controller.getPlayer1().getOwnBoard().getShips() + 2);
                        
                    case State.PLACE2 =>
                        controller.getPlayer2().getName() + " now place the ship with the length of " + (controller.getPlayer2().getOwnBoard().getShips() + 2);
                    
                    case State.SHOOT1 =>
                        controller.getPlayer1().getName() + " is now at the turn to shoot";
                        
                    case State.SHOOT2 =>
                        controller.getPlayer2().getName() + " is now at the turn to shoot";
                        
                    case _ =>
                        "status: " + controller.getCurrentState();
                }
                }
            </div>
        </div>
        <div class="col-md-4 text-center">
            <div class="chat">
            <textarea class="form-control" id="chatView" rows="5"></textarea>
            <div class="input-group">
                <input id="chatInput" type="text" class="form-control input-sm" placeholder="Type your message here...">
                    <span class="input-group-btn">
                        <button class="btn btn-warning btn-sm" id="btn-chat" onClick="chat()">
                            Send</button>
                    </span>
            </div>
        </div>
        </div>
    </div>
      
@******************************************** GAMEFIELD ************************************************@

    <div id="gamefield">
    
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6" text-center>
                <div class="fieldLabel">
                    @for(colCount <- 1 until 11) {
                        <div id="topLabel">@colCount</div>       
                    }
                </div>
            </div>
            <div class="col-md-3"></div>
        </div>
        
        @for(rowCount <- 0 until 10) {
            <div class="row">
                <div class="col-md-3 text-right">
                    <p class="fieldLabel">
                        @{((65 + rowCount).toChar).toString()}
                    </p>
                </div>
                
                <div class="col-md-6 text-center">
                    <div class="btn-group">
                        @for(colCount <- 0 until 10) {
                                <button type="button" class="btn btn-default btn-md" onClick="@if(controller.getCurrentState() == State.SHOOT1 || controller.getCurrentState() == State.SHOOT2) {shoot(@rowCount, @colCount)} else {setCords(@rowCount, @colCount)}">
                                        @rowCount.toString().toUpperCase() @colCount
                                </button>
                        }
                    </div>
                </div>
                
                <div class="col-md-3 text-center">
                    @if(rowCount == 0 && (controller.getCurrentState == State.PLACE1 || controller.getCurrentState == State.PLACE2)) {
                        <button type="button" class="btn btn-default" id="horizontal">
                            horizontal
                        </button>
    
                        <button type="button" class="btn btn-default" id="vertical">
                            vertical
                        </button>
                    }
                </div>
            </div>
        }
    </div>
    
@*************************************** CHAT *********************************************@

    
}
